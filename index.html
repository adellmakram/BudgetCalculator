<!DOCTYPE html>

<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 15px;
            min-height: 100vh;
        }

```
    .container {
        max-width: 900px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        overflow: hidden;
    }
    
    .header {
        background: linear-gradient(45deg, #2c3e50, #34495e);
        color: white;
        padding: 20px;
        text-align: center;
    }
    
    .header h1 {
        margin: 0;
        font-size: 1.8em;
        font-weight: 300;
    }
    
    .header p {
        margin: 5px 0 0 0;
        font-size: 0.9em;
        opacity: 0.9;
    }
    
    .content {
        padding: 20px;
    }
    
    .section {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 15px;
        border: 2px solid #e9ecef;
    }
    
    .section-title {
        font-size: 1.2em;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 15px;
        border-bottom: 2px solid #3498db;
        padding-bottom: 8px;
    }
    
    .input-row {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 15px;
    }
    
    .input-row label {
        font-weight: 500;
        color: #2c3e50;
        font-size: 0.95em;
    }
    
    .input-row input {
        padding: 12px 15px;
        border: 2px solid #ddd;
        border-radius: 8px;
        font-size: 16px;
        transition: all 0.3s ease;
    }
    
    .input-row input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    
    .results-section {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin-top: 15px;
    }
    
    .summary-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    }
    
    .available-income {
        background: linear-gradient(45deg, #27ae60, #2ecc71);
        color: white;
        text-align: center;
        padding: 20px;
        border-radius: 15px;
        margin: 15px 0;
    }
    
    .available-amount {
        font-size: 2em;
        font-weight: 300;
        margin: 10px 0;
    }
    
    .category-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 15px;
        margin-top: 15px;
    }
    
    .category-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        border-left: 5px solid;
        transition: transform 0.3s ease;
    }
    
    .category-card:hover {
        transform: translateY(-2px);
    }
    
    .needs { border-left-color: #e74c3c; }
    .wants { border-left-color: #f39c12; }
    .savings { border-left-color: #27ae60; }
    
    .category-title {
        font-size: 1.1em;
        font-weight: 600;
        margin-bottom: 15px;
        color: #2c3e50;
    }
    
    .category-amount {
        font-size: 1.6em;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 10px;
    }
    
    .remaining-amount {
        font-size: 1.3em;
        font-weight: 600;
        margin-top: 10px;
        padding: 10px;
        border-radius: 8px;
        text-align: center;
    }
    
    .remaining-positive {
        background: #d4edda;
        color: #155724;
    }
    
    .remaining-negative {
        background: #f8d7da;
        color: #721c24;
    }
    
    .examples {
        background: #f8f9fa;
        padding: 12px;
        border-radius: 8px;
        margin-top: 10px;
    }
    
    .examples h4 {
        margin: 0 0 8px 0;
        color: #2c3e50;
        font-size: 0.9em;
    }
    
    .examples ul {
        margin: 0;
        padding-right: 15px;
    }
    
    .examples li {
        margin: 3px 0;
        color: #7f8c8d;
        font-size: 0.8em;
    }
    
    .commitment-item {
        display: flex;
        justify-content: space-between;
        padding: 8px 0;
        border-bottom: 1px solid #ecf0f1;
    }
    
    .total-commitments {
        font-weight: 600;
        color: #e74c3c;
        font-size: 1.1em;
        padding-top: 15px;
        border-top: 2px solid #e74c3c;
        margin-top: 15px;
    }

    /* Expense Tracking Styles */
    .expense-section {
        background: #fff3cd;
        border: 2px solid #ffc107;
    }

    .expense-category {
        background: white;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 15px;
        border-left: 4px solid;
    }

    .expense-category.needs-expense { border-left-color: #e74c3c; }
    .expense-category.wants-expense { border-left-color: #f39c12; }
    .expense-category.savings-expense { border-left-color: #27ae60; }

    .expense-category h4 {
        margin: 0 0 10px 0;
        color: #2c3e50;
        font-size: 1em;
    }

    .expense-item {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        align-items: center;
    }

    .expense-item input[type="text"] {
        flex: 2;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 14px;
    }

    .expense-item input[type="number"] {
        flex: 1;
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 14px;
    }

    .add-expense-btn {
        background: #007bff;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        font-size: 12px;
        cursor: pointer;
        margin-top: 10px;
    }

    .add-expense-btn:hover {
        background: #0056b3;
    }

    .delete-expense {
        background: #dc3545;
        color: white;
        border: none;
        padding: 5px 8px;
        border-radius: 3px;
        cursor: pointer;
        font-size: 12px;
    }

    .delete-expense:hover {
        background: #c82333;
    }

    .expense-total {
        font-weight: 600;
        color: #dc3545;
        text-align: center;
        margin-top: 10px;
        padding: 8px;
        background: #f8d7da;
        border-radius: 5px;
    }

    /* Mobile optimizations for iPhone 11 Pro Max */
    @media (max-width: 414px) {
        body {
            padding: 10px;
        }
        
        .header {
            padding: 15px;
        }
        
        .header h1 {
            font-size: 1.5em;
        }
        
        .content {
            padding: 15px;
        }
        
        .section {
            padding: 15px;
            margin-bottom: 12px;
        }
        
        .category-amount {
            font-size: 1.4em;
        }
        
        .available-amount {
            font-size: 1.8em;
        }
        
        .input-row input {
            padding: 10px 12px;
            font-size: 16px; /* Prevents zoom on iOS */
        }
        
        .expense-item {
            flex-direction: column;
            gap: 8px;
        }
        
        .expense-item input {
            width: 100%;
        }
    }
</style>

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ’° Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</h1>
            <p>Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ© Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø«Ù… Ù‚Ø§Ø¹Ø¯Ø© 50-30-20</p>
        </div>

    <div class="content">
        <!-- Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ -->
        <div class="section">
            <div class="section-title">ğŸ“Š Ø§Ù„Ø¯Ø®Ù„ Ø§Ù„Ø´Ù‡Ø±ÙŠ</div>
            <div class="input-row">
                <label>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¯Ø®Ù„:</label>
                <input type="number" id="total-income" value="55000" placeholder="55000">
                <span>Ø¬Ù†ÙŠÙ‡</span>
            </div>
        </div>

        <!-- Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ© -->
        <div class="section">
            <div class="section-title">ğŸ”´ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ© (ØºÙŠØ± Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ£Ø¬ÙŠÙ„)</div>
            
            <div class="input-row">
                <label>Ù‚Ø³Ø· Ø´Ù‡Ø±ÙŠ:</label>
                <input type="number" id="monthly-installment" value="12000" placeholder="12000">
                <span>Ø¬Ù†ÙŠÙ‡</span>
            </div>
            
            <div class="input-row">
                <label>Ø¹Ø´ÙˆØ±:</label>
                <input type="number" id="tithe" value="4000" placeholder="4000">
                <span>Ø¬Ù†ÙŠÙ‡</span>
            </div>
            
            <div class="input-row">
                <label>Ù…Ø³Ø§Ø¹Ø¯Ø© Ø´Ø®Øµ:</label>
                <input type="number" id="personal-help" value="3000" placeholder="3000">
                <span>Ø¬Ù†ÙŠÙ‡</span>
            </div>
            
            <div class="input-row">
                <label>Ù‚Ø³Ø· Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©:</label>
                <input type="number" id="car-installment" value="2000" placeholder="2000">
                <span>Ø¬Ù†ÙŠÙ‡</span>
            </div>
        </div>

        <!-- ØªØªØ¨Ø¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ© -->
        <div class="section expense-section">
            <div class="section-title">ğŸ“ ØªØªØ¨Ø¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©</div>
            
            <!-- Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© -->
            <div class="expense-category needs-expense">
                <h4>ğŸ  Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©</h4>
                <div id="needs-expenses"></div>
                <button class="add-expense-btn" onclick="addExpense('needs')">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</button>
                <div class="expense-total" id="needs-total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0 Ø¬Ù†ÙŠÙ‡</div>
            </div>

            <!-- Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø±ØºØ¨Ø§Øª ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡ -->
            <div class="expense-category wants-expense">
                <h4>ğŸ¯ Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø±ØºØ¨Ø§Øª ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡</h4>
                <div id="wants-expenses"></div>
                <button class="add-expense-btn" onclick="addExpense('wants')">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</button>
                <div class="expense-total" id="wants-total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0 Ø¬Ù†ÙŠÙ‡</div>
            </div>

            <!-- Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± -->
            <div class="expense-category savings-expense">
                <h4>ğŸ’° Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø±</h4>
                <div id="savings-expenses"></div>
                <button class="add-expense-btn" onclick="addExpense('savings')">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</button>
                <div class="expense-total" id="savings-total">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: 0 Ø¬Ù†ÙŠÙ‡</div>
            </div>
        </div>

        <!-- Ø§Ù„Ù†ØªØ§Ø¦Ø¬ -->
        <div class="results-section">
            <div class="summary-card">
                <h3>ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª</h3>
                <div id="commitments-summary">
                    <div class="commitment-item">
                        <span>Ù‚Ø³Ø· Ø´Ù‡Ø±ÙŠ</span>
                        <span id="display-installment">12,000 Ø¬</span>
                    </div>
                    <div class="commitment-item">
                        <span>Ø¹Ø´ÙˆØ±</span>
                        <span id="display-tithe">4,000 Ø¬</span>
                    </div>
                    <div class="commitment-item">
                        <span>Ù…Ø³Ø§Ø¹Ø¯Ø© Ø´Ø®Øµ</span>
                        <span id="display-help">3,000 Ø¬</span>
                    </div>
                    <div class="commitment-item">
                        <span>Ù‚Ø³Ø· Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
                        <span id="display-car">2,000 Ø¬</span>
                    </div>
                    <div class="commitment-item total-commitments">
                        <span>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª</span>
                        <span id="total-commitments">21,000 Ø¬</span>
                    </div>
                </div>
            </div>
            
            <div class="summary-card">
                <h3>ğŸ’¡ Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ§Ø­ Ù„Ù„ØªÙ‚Ø³ÙŠÙ…</h3>
                <div style="text-align: center; margin-top: 20px;">
                    <div style="font-size: 1.1em; color: #7f8c8d;">Ø§Ù„Ø¯Ø®Ù„ - Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª Ø§Ù„Ø«Ø§Ø¨ØªØ©</div>
                    <div style="font-size: 2em; font-weight: 300; color: #27ae60; margin: 10px 0;" id="available-income">34,000 Ø¬</div>
                </div>
            </div>
        </div>

        <div class="available-income">
            <div>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ§Ø­ Ù„Ù‚Ø§Ø¹Ø¯Ø© 50-30-20</div>
            <div class="available-amount" id="available-for-rule">34,000 Ø¬Ù†ÙŠÙ‡</div>
        </div>

        <!-- ØªÙ‚Ø³ÙŠÙ… 50-30-20 Ù…Ø¹ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ -->
        <div class="category-grid">
            <div class="category-card needs">
                <div class="category-title">ğŸ  Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (50%)</div>
                <div class="category-amount" id="needs-amount">17,000 Ø¬Ù†ÙŠÙ‡</div>
                <div class="remaining-amount" id="needs-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 17,000 Ø¬Ù†ÙŠÙ‡</div>
                <div class="examples">
                    <h4>Ø£Ù…Ø«Ù„Ø©:</h4>
                    <ul>
                        <li><strong>ØµÙ„Ø­ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</strong> - Ø¯Ù‡ Ø§Ø­ØªÙŠØ§Ø¬ Ø£Ø³Ø§Ø³ÙŠ</li>
                        <li><strong>Ù…ÙˆØ§ØµÙ„Ø§Øª Ø§Ù„Ø´ØºÙ„</strong> - Ø§Ø­ØªÙŠØ§Ø¬ Ø£Ø³Ø§Ø³ÙŠ</li>
                        <li>Ø§Ù„Ø¥ÙŠØ¬Ø§Ø± ÙˆØ§Ù„ÙÙˆØ§ØªÙŠØ±</li>
                        <li>Ø§Ù„Ø£ÙƒÙ„ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠ</li>
                        <li>Ø§Ù„Ø£Ø¯ÙˆÙŠØ© ÙˆØ§Ù„ØªØ£Ù…ÙŠÙ† Ø§Ù„ØµØ­ÙŠ</li>
                    </ul>
                </div>
            </div>
            
            <div class="category-card wants">
                <div class="category-title">ğŸ¯ Ø§Ù„Ø±ØºØ¨Ø§Øª ÙˆØ§Ù„ØªØ±ÙÙŠÙ‡ (30%)</div>
                <div class="category-amount" id="wants-amount">10,200 Ø¬Ù†ÙŠÙ‡</div>
                <div class="remaining-amount" id="wants-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 10,200 Ø¬Ù†ÙŠÙ‡</div>
                <div class="examples">
                    <h4>Ø£Ù…Ø«Ù„Ø©:</h4>
                    <ul>
                        <li><strong>ÙƒØ±Ø³ÙŠ Ø£Ùˆ Ù…ÙƒØªØ¨ Ù„Ù„Ø´ØºÙ„</strong> - Ù„Ùˆ Ù…Ø´ Ø¶Ø±ÙˆØ±ÙŠ Ø­Ø§Ù„Ø§Ù‹</li>
                        <li>Ø§Ù„Ù…Ø·Ø§Ø¹Ù… ÙˆØ§Ù„Ø®Ø±ÙˆØ¬Ø§Øª</li>
                        <li>Ù…Ù„Ø§Ø¨Ø³ Ø¥Ø¶Ø§ÙÙŠØ©</li>
                        <li>Ø§Ø´ØªØ±Ø§ÙƒØ§Øª ØªØ±ÙÙŠÙ‡ÙŠØ©</li>
                        <li>Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª ÙˆØ§Ù„Ø³ÙØ±</li>
                    </ul>
                </div>
            </div>
            
            <div class="category-card savings">
                <div class="category-title">ğŸ’° Ø§Ù„Ø§Ø¯Ø®Ø§Ø± ÙˆØ§Ù„Ø§Ø³ØªØ«Ù…Ø§Ø± (20%)</div>
                <div class="category-amount" id="savings-amount">6,800 Ø¬Ù†ÙŠÙ‡</div>
                <div class="remaining-amount" id="savings-remaining">Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: 6,800 Ø¬Ù†ÙŠÙ‡</div>
                <div class="examples">
                    <h4>Ø£Ù…Ø«Ù„Ø©:</h4>
                    <ul>
                        <li>ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</li>
                        <li>Ø§Ø¯Ø®Ø§Ø± Ù„Ø£Ù‡Ø¯Ø§Ù Ù…Ø³ØªÙ‚Ø¨Ù„ÙŠØ©</li>
                        <li>Ø§Ø³ØªØ«Ù…Ø§Ø±Ø§Øª Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ù…Ø¯Ù‰</li>
                        <li>ØªØ£Ù…ÙŠÙ† Ø¹Ù„Ù‰ Ø§Ù„Ø­ÙŠØ§Ø©</li>
                        <li>Ø®Ø·Ø· Ø§Ù„ØªÙ‚Ø§Ø¹Ø¯</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    let expenseCounters = {
        needs: 0,
        wants: 0,
        savings: 0
    };

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    function loadSavedData() {
        const savedData = JSON.parse(localStorage.getItem('budgetData') || '{}');
        
        // ØªØ­Ù…ÙŠÙ„ Ù‚ÙŠÙ… Ø§Ù„Ø¯Ø®Ù„ ÙˆØ§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª
        if (savedData.income) {
            Object.keys(savedData.income).forEach(key => {
                const element = document.getElementById(key);
                if (element && savedData.income[key]) {
                    element.value = savedData.income[key];
                }
            });
        }
        
        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª
        if (savedData.expenses) {
            Object.keys(savedData.expenses).forEach(category => {
                const expenses = savedData.expenses[category];
                expenses.forEach(expense => {
                    addExpenseWithData(category, expense.name, expense.amount);
                });
            });
        }
        
        updateCalculations();
    }

    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
    function saveData() {
        const data = {
            income: {
                'total-income': document.getElementById('total-income').value,
                'monthly-installment': document.getElementById('monthly-installment').value,
                'tithe': document.getElementById('tithe').value,
                'personal-help': document.getElementById('personal-help').value,
                'car-installment': document.getElementById('car-installment').value
            },
            expenses: {
                needs: [],
                wants: [],
                savings: []
            },
            lastUpdated: new Date().toISOString()
        };
        
        // Ø¬Ù…Ø¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª
        ['needs', 'wants', 'savings'].forEach(category => {
            const container = document.getElementById(`${category}-expenses`);
            const expenseItems = container.querySelectorAll('.expense-item');
            
            expenseItems.forEach(item => {
                const nameInput = item.querySelector('input[type="text"]');
                const amountInput = item.querySelector('input[type="number"]');
                
                if (nameInput.value || amountInput.value) {
                    data.expenses[category].push({
                        name: nameInput.value,
                        amount: parseFloat(amountInput.value) || 0
                    });
                }
            });
        });
        
        localStorage.setItem('budgetData', JSON.stringify(data));
    }

    function addExpense(category) {
        addExpenseWithData(category, '', 0);
    }

    function addExpenseWithData(category, name = '', amount = 0) {
        const container = document.getElementById(`${category}-expenses`);
        const expenseId = `${category}-expense-${expenseCounters[category]++}`;
        
        const expenseItem = document.createElement('div');
        expenseItem.className = 'expense-item';
        expenseItem.id = expenseId;
        
        expenseItem.innerHTML = `
            <input type="text" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…ØµØ±ÙˆÙ (Ù…Ø«Ù„: Ø­Ø°Ø§Ø¡ØŒ Ø¥ÙŠØ¬Ø§Ø±)" value="${name}" oninput="saveData(); updateCalculations()">
            <input type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" value="${amount || ''}" oninput="saveData(); updateCalculations()">
            <button class="delete-expense" onclick="deleteExpense('${expenseId}')">Ø­Ø°Ù</button>
        `;
        
        container.appendChild(expenseItem);
        updateCalculations();
    }

    function deleteExpense(expenseId) {
        const element = document.getElementById(expenseId);
        element.remove();
        saveData();
        updateCalculations();
    }

    function calculateCategoryExpenses(category) {
        const container = document.getElementById(`${category}-expenses`);
        const expenseItems = container.querySelectorAll('.expense-item');
        let total = 0;
        
        expenseItems.forEach(item => {
            const amountInput = item.querySelector('input[type="number"]');
            const amount = parseFloat(amountInput.value) || 0;
            total += amount;
        });
        
        return total;
    }

    function updateCalculations() {
        // Ø¬Ù…Ø¹ Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª
        const totalIncome = parseFloat(document.getElementById('total-income').value) || 0;
        const monthlyInstallment = parseFloat(document.getElementById('monthly-installment').value) || 0;
        const tithe = parseFloat(document.getElementById('tithe').value) || 0;
        const personalHelp = parseFloat(document.getElementById('personal-help').value) || 0;
        const carInstallment = parseFloat(document.getElementById('car-installment').value) || 0;
        
        // Ø­Ø³Ø§Ø¨ Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù…Ø§Øª
        const totalCommitments = monthlyInstallment + tithe + personalHelp + carInstallment;
        
        // Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ§Ø­ Ù„Ù„ØªÙ‚Ø³ÙŠÙ…
        const availableIncome = totalIncome - totalCommitments;
        
        // ØªÙ‚Ø³ÙŠÙ… 50-30-20
        const needs = availableIncome * 0.5;
        const wants = availableIncome * 0.3;
        const savings = availableIncome * 0.2;
        
        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
        const needsExpenses = calculateCategoryExpenses('needs');
        const wantsExpenses = calculateCategoryExpenses('wants');
        const savingsExpenses = calculateCategoryExpenses('savings');
        
        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ
        const needsRemaining = needs - needsExpenses;
        const wantsRemaining = wants - wantsExpenses;
        const savingsRemaining = savings - savingsExpenses;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø±Ø¶
        document.getElementById('display-installment').textContent = monthlyInstallment.toLocaleString() + ' Ø¬';
        document.getElementById('display-tithe').textContent = tithe.toLocaleString() + ' Ø¬';
        document.getElementById('display-help').textContent = personalHelp.toLocaleString() + ' Ø¬';
        document.getElementById('display-car').textContent = carInstallment.toLocaleString() + ' Ø¬';
        document.getElementById('total-commitments').textContent = totalCommitments.toLocaleString() + ' Ø¬';
        
        document.getElementById('available-income').textContent = availableIncome.toLocaleString() + ' Ø¬';
        document.getElementById('available-for-rule').textContent = availableIncome.toLocaleString() + ' Ø¬Ù†ÙŠÙ‡';
        
        document.getElementById('needs-amount').textContent = needs.toLocaleString() + ' Ø¬Ù†ÙŠÙ‡';
        document.getElementById('wants-amount').textContent = wants.toLocaleString() + ' Ø¬Ù†ÙŠÙ‡';
        document.getElementById('savings-amount').textContent = savings.toLocaleString() + ' Ø¬Ù†ÙŠÙ‡';
        
        // ØªØ­Ø¯ÙŠØ« Ù…Ø¬Ø§Ù…ÙŠØ¹ Ø§Ù„Ù…ØµØ±ÙˆÙØ§Øª
        document.getElementById('needs-total').textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${needsExpenses.toLocaleString()} Ø¬Ù†ÙŠÙ‡`;
        document.getElementById('wants-total').textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${wantsExpenses.toLocaleString()} Ø¬Ù†ÙŠÙ‡`;
        document.getElementById('savings-total').textContent = `Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹: ${savingsExpenses.toLocaleString()} Ø¬Ù†ÙŠÙ‡`;
        
        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù…Ø¹ Ø§Ù„Ø£Ù„ÙˆØ§Ù†
        updateRemainingDisplay('needs', needsRemaining);
        updateRemainingDisplay('wants', wantsRemaining);
        updateRemainingDisplay('savings', savingsRemaining);
        
        // ØªØºÙŠÙŠØ± Ù„ÙˆÙ† Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…ØªØ§Ø­ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©
        const availableElement = document.getElementById('available-income');
        if (availableIncome < 0) {
            availableElement.style.color = '#e74c3c';
        } else if (availableIncome < 10000) {
            availableElement.style.color = '#f39c12';
        } else {
            availableElement.style.color = '#27ae60';
        }
    }

    function updateRemainingDisplay(category, remaining) {
        const element = document.getElementById(`${category}-remaining`);
        element.textContent = `Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ: ${remaining.toLocaleString()} Ø¬Ù†ÙŠÙ‡`;
        
        if (remaining >= 0) {
            element.className = 'remaining-amount remaining-positive';
        } else {
            element.className = 'remaining-amount remaining-negative';
        }
    }

    // Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
    document.getElementById('total-income').addEventListener('input', () => { saveData(); updateCalculations(); });
    document.getElementById('monthly-installment').addEventListener('input', () => { saveData(); updateCalculations(); });
    document.getElementById('tithe').addEventListener('input', () => { saveData(); updateCalculations(); });
    document.getElementById('personal-help').addEventListener('input', () => { saveData(); updateCalculations(); });
    document.getElementById('car-installment').addEventListener('input', () => { saveData(); updateCalculations(); });
    
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
    loadSavedData();
    
    // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ©
    updateCalculations();
</script>

</body>
</html>